"use strict";define(function(require,exports,module){var t=require("common/myWidget"),e=require("dialog"),$=require("$"),n=t.handlerbars,i=!!CONFIG.bootstrap,a={alert:['<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>','<h4 class="modal-title">标题</h4>',"</div>",'<div class="modal-body">',"内容","</div>",'<div class="modal-footer">','<button type="button" class="btn btn-default btn-sm" data-dismiss="modal">确定</button>',"</div>","</div>","</div>","</div>"].join(""),confirm:['<div class="modal fade"  tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-header">','<button type="button" class="close JS-trigger-click-cancel" aria-label="Close"><span aria-hidden="true">&times;</span></button>','<h4 class="modal-title">标题</h4>',"</div>",'<div class="modal-body">',"内容","</div>",'<div class="modal-footer">','<button type="button" class="btn btn-default btn-sm JS-trigger-click-sure">确定</button>','<button type="button" class="btn btn-default btn-sm JS-trigger-click-cancel">取消</button>',"</div>","</div>","</div>","</div>"].join(""),dialogAlert:n.compile(['<div class="modal-body">','<i class="modal-icon {{#isEqual status 0}}modal-icon-error{{/isEqual}}{{#isEqual status 1}}modal-icon-success{{/isEqual}}"></i>{{{content}}}',"</div>"].join("")),dialogConfirm:n.compile(['<div class="modal-confirm-body">','<div class="child-title fn-word-wrap"><i class="modal-icon modal-icon-warning"></i>{{title}}</div>','<div class="child-content fn-MT10 fn-word-wrap">{{{content}}}</div>','<div class=" fn-MT15 fn-TAC fn-MR10">','{{#if noSure}}<button type="button" class="fn-btn fn-btn-primary fn-btn-sm {{sureBtnOpts/className}} JS-trigger-click-sure">{{sureBtnOpts/text}}</button>{{/if}}','{{#if noCancle}}<button type="button" class="fn-btn fn-btn-default fn-btn-sm fn-W60 fn-ML10 JS-trigger-click-cancel">取 消</button>{{/if}}',"</div>","</div>"].join(""))},o=t.extend({clssName:"Modal",attrs:{status:["失败","成功"]},events:{},initProps:function(){},setup:function(){},Statics:{alert:function(t,n,o){var l,s=this;i?(l=new s({template:a.alert}).render(),l.element.modal().on("hidden.bs.modal",function(){l.destroy(),o&&o()}),l.$(".modal-title").html(l.get("status")[t]||t),l.$(".modal-body").html(n)):(t=~~t,n=n||(t?"操作成功":"操作失败"),l=new e({content:a.dialogAlert({content:n,status:~~t}),width:"auto",height:"auto",closeTpl:""}).after("hide",function(){this.destroy(),o&&o()}).show(),setTimeout(function(){l.hide()},3e3))},confirm:function(t,n,o,l,s){s=s||{};var d,c=this;return i?(d=new c({template:a.confirm,events:{"click .JS-trigger-click-sure":function(){o&&o(),d.element.modal("hide")},"click .JS-trigger-click-cancel":function(){l&&l(),d.element.modal("hide")}}}).render(),d.element.modal(),d.$(".modal-title").html(t),d.$(".modal-body").html(n)):d=new e($.extend({content:a.dialogConfirm({title:t,content:n,noCancle:!s.noCancle,noSure:!s.noSure,sureBtnOpts:s.sureBtnText?{className:"",text:s.sureBtnText}:{className:"fn-W60",text:"确 定"}}),width:350,height:"auto",events:{"click .JS-trigger-click-sure":function(){o&&o(),this.hide()},"click .JS-trigger-click-cancel":function(){l&&l(),this.hide()},'click [data-role="close"]':function(){l&&l()}}},s)).after("hide",function(){this.destroy()}).show(),d},show:function(t,n){return new e($.extend({content:t,width:"auto",height:"auto"},n)).after("hide",function(){this.destroy()}).show()}}});return o});