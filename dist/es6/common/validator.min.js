"use strict";define(function(require,exports,module){function e(e){var r=/^[1-9]\d{5}(19\d{2}|[2-9]\d{3})((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])(\d{4}|\d{3}X)$/i,n="10X98765432",a=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],i=0;if(!r.test(e))return!1;var u=e.substr(6,4),d=e.substr(10,2),l=e.substr(12,2),o=e.substr(6,8);if(o!=t(new Date(u+"/"+d+"/"+l)))return!1;for(var c=0;c<e.length-1;c++)i+=e[c]*a[c];var s=i%11,m=n[s];return e[e.length-1].toUpperCase()==m}function t(e){if(e instanceof Date){var t=e.getFullYear(),r=e.getMonth()+1;r=10>r?"0"+r:r;var n=e.getDate();return n=10>n?"0"+n:n,""+t+r+n}return""}var $=require("$"),r=require("common/util"),n=require("validator"),a=n.extend({clearError:function(){var e=this;return $(e.items).each(function(e){this.element.closest(".kuma-form-item").removeClass("kuma-form-item-error")}),e},execute:function(e){var t=this;return t.items?a.superclass.execute.call(t,e):e(null)},destroy:function(){var e=this;return e.clearError(),a.superclass.destroy.call(e)},removeItems:function(e,t){var r=this,n=$(e);n.each(function(e,n){var a=$(n);a.find(t||".JS-target-required").each(function(e,t){r.removeItem($(t))})})},addItems:function(e,t){var r=this,n=$(e);n.each(function(e,n){var a=$(n);a.find(t||".JS-target-required").each(function(e,t){var n=$(t),i=n.prop("type"),u=n.data("skipHidden");"radio"!==i&&"checkbox"!==i||(n=a.find('[name="'+n.prop("name")+'"]')),u=u!==!1,r.addItem($.extend({element:n,triggerType:n.data("triggerType"),skipHidden:u,checkNull:!1,onItemValidate:function(e){"text"===i&&e.val($.trim(e.val()))}}))})})},Statics:{use:function(e,t,r,n){if(e=$(e),e.length){var a=this,i=new a($.extend({element:e},r));return e.find(t||".JS-target-required").each(function(){var t=$(this),r=t.data("checkNull"),a=t.prop("type"),u=t.data("skipHidden"),d=t.data("trim");"radio"!==a&&"checkbox"!==a||(t=e.find('[name="'+t.prop("name")+'"]')),u=u!==!1,r=r===!0,d=d===!0,i.addItem($.extend({element:t,triggerType:t.data("triggerType"),skipHidden:u,checkNull:r,onItemValidate:function(e){("text"===a||d&&"textarea"===a)&&e.val($.trim(e.val()))}},n))}),i}},oneExecute:function(e,t){var n,a=this,i=a.oneValidator;return i&&i.destroy&&i.destroy(),i=a.use(e,t),i.execute(function(e,t){n=e,e&&r.log(t)}),a.oneValidator=i,n}}});return a.addRule("cardid",function(t){return e(t.element.val())},"请填写正确的身份证号"),a.addRule("postalcode",function(e){var t=$.trim(e.element.val());return!t||/^\d{6}$/.test(t)},"请填写正确的邮政编码"),a.addRule("wholeNumber",function(e){var t=$.trim(e.element.val());return!t||/^\d+$/.test(t)&&+t},"请填写正整数"),a.addRule("naturalNumber",function(e){var t=$.trim(e.element.val());return!t||/^\d+$/.test(t)},"请填写自然数"),a.addRule("tel",function(e){var t=$.trim(e.element.val());return!t||/^\d{3,4}-\d{7,8}$/.test(t)},"请填写正确的电话号码(比如：0571-88888888)"),a.addRule("mobileOrTel",function(e){var t=$.trim(e.element.val());return!t||/^\d{3,4}-\d{7,8}$/.test(t)||/^\d{11}$/.test(t)},"请填写正确的电话号码(比如：0571-88888888)"),a.addRule("money",function(e){var t=$.trim(e.element.val());return!t||/^\d+(.\d{1,2})?$/.test(t)},"请填写正确的金额"),a.addRule("letter",function(e){var t=$.trim(e.element.val());return!t||/^\w+$/.test(t)},"请填写字母数字下划线"),a.addRule("credentials",function(e){var t=$.trim(e.element.val());return!t||/^(\w|\(|\)){6,15}$/.test(t)},"请填写字母数字下划线括号"),a.addRule("aliyunEmail",function(e){var t=$.trim(e.element.val());return!t||/@aliyun\.com$/.test(t)},"请填写正确的阿里云邮箱"),a.addRule("lastcardid",function(e){var t=$.trim(e.element.val());return!t||/^(\d{4}|\d{3}X)$/i.test(t)}),a.addRule("multiMobile",function(e){var t=$.trim(e.element.val());return/^(?:1\d{10}[,，])*1\d{10}$/.test(t)},"请填写正确的手机号(若多个手机号，请用 “，” 隔开)"),a});