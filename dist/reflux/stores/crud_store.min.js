"use strict";define(function(require,exports,module){var t=require("reflux"),n=require("../actions/crud_actions"),e=require("common/util"),i=t.createStore({listenables:[n],init:function(){this.onFetch()},onFetch:function(){var t=this;e.fetch("src/data.json").then(function(n){t.trigger({type:"init",value:n})})["catch"](function(t){console.log(t)})},onDataChange:function(t){t.id?this.onModify(t):this.onAdd(t)},onAdd:function(t){t.id=e.randomBy(1e3),this.trigger({type:"add",value:t},function(){console.log("addSuccess")})},onModify:function(t){this.trigger({type:"modify",value:t})},onDelete:function(t){this.trigger({type:"delete",value:t})}});return i});