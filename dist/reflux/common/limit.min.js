"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};define(function(require,exports){function n(n,t,r){var e=N[r];return e(n)===e(t)}function t(n,t){return Qn(n)===Qn(t)&&ft(v(n),function(r,e){return _n(n[r],t[r])})}function r(n,t){return n=Wn((1023&n).toString(2),"0",10),t=Wn((1023&t).toString(2),"0",10),(parseInt(n+t,2)+65536).toString(16)}function e(n){if(parseInt(n,16)<=65535)return[n];var t=parseInt(n,16)-65536,r=t>>10,e=1023&t;return r=(55296|r).toString(16).toUpperCase(),e=(56320|e).toString(16).toUpperCase(),[r,e]}function i(n,t,r){return n=Cn(n),G?G.call(n,t,r):-1!==n.indexOf(t,r)}function u(n,t,r,e){n=Cn(n),t=Cn(t),r=~~r;var i,u=n.length,o=e?Z:nn;return u>=r?n:o?o.call(n,t,r):(i=Math.ceil((r-u)/t.length),e?(Tn(t,i)+n).slice(-r):(n+Tn(t,i)).slice(0,r))}function o(n,t){for(null==n&&(n=""),n+="",t=~~t;n.length<t;)n+=n;return n.slice(0,t)}function a(n){return n=~~n,0>n?0:n}function c(){var n=!0;return Xn(O.apply(w,arguments),function(t){return kn(t)?void 0:(pn("warn",t,"the num is not a finite number"),n=!1)}),n}function l(){return c.apply(void 0,arguments)?Math.max.apply(Math,ct(arguments,function(n){return((""+n).split(".")[1]||"").length})):void 0}function f(n,t,r,e){return e<r.length?n+t+r.slice(0,e)+"."+r.slice(e):n+t+Bn(r,"0",e)}function p(n,t,r,e){return t.length>e?n+t.slice(0,-e)+"."+t.slice(-e)+r:n+"0."+Wn(t,"0",e)+r}function s(n,t){if(c(n)){if(n+="",t=~~t,0===t)return n;var r,e,i="";return n=n.split("."),r=n[0],e=n[1]||"","-"===r.charAt(0)&&(i="-",r=r.slice(1)),0>t?p(i,r,e,-t):f(i,r,e,t)}}function d(n,t){var r=n[0]+"",e=n[1]+"",i=(r.split(".")[1]||"").length,u=(e.split(".")[1]||"").length,o=t?+s(+r.replace(".","")*+e.replace(".",""),-(i+u)):+s(+r.replace(".","")/+e.replace(".",""),u-i);return n.splice(0,2,o),o}function v(n){return Gn(Mn(n)?it(n):n)}function y(n,t,r,e,i){for(var u,o=v(n),a=~~i,c=o.length;c>a&&(u=o[a],t.call(r,n[u],u,n)!==!1||!e);a++);}function h(n,t,r){if(tn){var e=!1;return y(n,Nn(t)?function(n){return Nn(n)?(e=!0,!1):void 0}:function(n){return n===t?(e=!0,!1):void 0},void 0,!0,r>=0?r:n.length+r),e}return tn.call(n,t,r)}function g(n,t,r){var e={key:-1,val:void 0};return Xn(n,function(n,r){return t.call(this,n,+r)?(e={key:r,val:n},!1):void 0},r),e}function m(n,t){return pt(n,function(n){return ft(n,function(n,r){return n===t[r]})})}var b=require("./limit-dom"),S={},w=Array.prototype,x=Object.prototype,A=Function.prototype,M=String.prototype,N=window,k=(N.document,w.slice),E=w.splice,O=w.concat,D=w.unshift,F=w.push,_=x.toString,j=x.hasOwnProperty;S.slice=k;var I=Object.keys,C=Object.create,R=w.forEach,T=w.indexOf,W=w.lastIndexOf,B=w.map,H=w.filter,P=w.every,U=w.some,L=w.reduce,q=w.reduceRight,J=A.bind,z=M.trim,K=M.codePointAt,Y=String.fromCodePoint,G=M.includes,Q=M.startsWith,V=M.endsWith,X=M.repeat,Z=M.padStart,nn=M.padEnd,tn=w.includes,rn=w.find,en=w.findIndex,un=w.fill,on=w.copyWithin,an=S.K=function(n){return n},cn=S.cb=function(n){return yn(n)?n:an},ln=S.O={},fn={log:"background:#333;margin-left:11px;padding-right:17px;",error:"background:#F00;padding-right:3px;",warn:"background:#F70;margin-left:11px;padding-right:10px;"},pn=S.log=function(){if(!S.logClosed){var n,t=k.call(arguments),r=t.shift(),e=console||ln,i=b.isChrome;vt(["error","log","warn"],r)||(t.unshift(r),r="error"),n=e[r]||an;try{i&&t.unshift(fn[r]+"color:#FFF;padding-left:3px;border-radius:3px;"),t.unshift((i?"%c":"")+"limitJS "+r+":"),n.apply(e,t)}catch(u){n("limitJS ",t)}}},sn={toString:function(n){return pn("warn",n,"change into","'"+n+"'","limit.toString is called")},toArray:function(n){return pn("warn",n,"change into []","limit.toArray is called")},formatDate:function(n,t){return pn("warn","timestamp:",n,"date:",date,"limit.formatDate is called")},bind:function(n){return pn("warn",fun,"type is not function, limit.bind is called")}},dn=S.isUndefined=function(n){return void 0===n};S.setDefault=function(n){var t;return Xn(arguments,function(n){return t=n,dn(n)}),t};var vn=(S.isDefined=function(n){return!dn(n)},S.isNull=function(n){return null===n}),yn=S.isFunction=function(n){return"function"==typeof n};S.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===_.call(n)};"String,Number,Array,Date,RegExp,Error,Math".replace(/\w+/g,function(n){S["is"+n]=function(t){return _.call(t)==="[object "+n+"]"}});var hn=S.isNumber,gn=S.isArray,mn=S.isDate,bn=S.isMath,Sn=S.isError,wn=S.isRegExp,xn=S.isString,An=S.isObject=function(n){return yn(n)||"object"===("undefined"==typeof n?"undefined":_typeof(n))&&!!n},Mn=(S.isArguments=function(n){return Jn(n,"callee")},S.isArrayLike=function(n){return!!n&&hn(n.length)&&!yn(n)&&!Dn(n)}),Nn=S.isNaN=Number.isNaN||function(n){return hn(n)&&isNaN(n)},kn=S.isFinite=Number.isFinite||function(n){return hn(n)&&isFinite(n)},En=S.isInteger=Number.isInteger||function(n){return kn(n)&&Math.floor(n)===n};S.isSafeInteger=Number.isSafeInteger||function(n){return En(n)&&n>-9007199254740992&&9007199254740992>n};var On=S.isEmpty=function(n){return null==n?!0:0===Qn(n)};S.isElement=function(n){return!!n&&1===n.nodeType},S.isDocument=function(n){return!!n&&9===n.nodeType};var Dn=S.isWin=function(n){return!!n&&n.window===n&&n.self==n},Fn=["String","Number","Boolean"],_n=S.isEqual=function(r,e){if(pn("log","limit.isEqual is called ","undefined"==typeof r?"undefined":_typeof(r),":",r,"undefined"==typeof e?"undefined":_typeof(e),":",e),r===e)return!0;if(_.call(r)!==_.call(e))return!1;if(Nn(r))return!0;var i;return(i=In(r,Fn))?n(r,e,i):mn(r)?+r===+e:wn(r)?""+r==""+e:yn(r)&&""+r!=""+e?!1:t(r,e)},jn=["String","Number","Boolean","Null","Undefined","RegExp","Date","Math","Error"],In=S.isBase=function(n,t){!gn(t)&&(t=jn);var r="";return pt(t,function(t,e){var i=S["is"+t];return i&&i(n)&&(r=t)}),r};S.includes=function(n,t,r){return gn(n)?h(n,t,r):i(n,t,r)};var Cn=S.toString=function(n){return xn(n)?n:(sn.toString(n),""+n)},Rn=/^\s+|\s+$/g;S.trim=function(n){return n=arguments.length?n+"":"",z?z.call(n):n.replace(Rn,"")};S.codePointAt=function(n,t){if(n=Cn(n),t=~~t,K){var e=n.charCodeAt(t);return e>=55296&&56319>=e?r(e,n.charCodeAt(++t)):e.toString(16)}return K.call(n,t).toString(16)},S.fromCodePoint=function(n){return isFinite(n)?Y?Y.call(String,n):(n=ct(e(n.toString(16)),function(n){return"\\u"+n}).join(""),new Function('return "'+n+'"')()):(pn("warn",n,"the code must be a number"),"")},S.startsWith=function(n,t,r){return n=Cn(n),Q?Q.call(n,t,r):(r=~~r,n.indexOf(t,r)===r)},S.endsWith=function(n,t,r){if(n=Cn(n),V)return V.call(n,t,r);r=3===arguments.length?~~r:n.length;var e=r-t.length;return n.lastIndexOf(t,e)===e};var Tn=S.repeat=function(n,t){if(n=Cn(n),t=a(t),X)return X.call(n,t);var r=new Array(t),e=[];return Array.prototype.push.apply(e,r),e.map(function(){return n}).join("")},Wn=S.padStart=function(n,t,r){return u(n,t,r,!0)},Bn=S.padEnd=function(n,t,r){return u(n,t,r,!1)},Hn=(S.random=function(n,t){n=~~n,t=~~t;var r=Math.max(n,t),e=Math.min(n,t);return Math.floor((r-e+1)*Math.random()+e)},/(\d{1,3})(?=(\d{3})+$)/g),Pn=/(\d{1,3})(?=(\d{3})+\.)/g,Un=/,/g;S.thousandSeparator=function(n,t){return kn(n)?(hn(t)||(t=2),$n(n,t).replace(t?Pn:Hn,"$1,")):(pn("warn","limit.thousandSeparator is called ","undefined"==typeof n?"undefined":_typeof(n),":",n),"")},S.unThousandSeparator=function(n){return xn(n)?+n.replace(Un,""):(pn("warn","limit.unThousandSeparator is called ","undefined"==typeof n?"undefined":_typeof(n),":",n),NaN)};var $n=S.toFixed=function(n,t){t=a(t);var n=s(n,t);return dn(n)?n:s(Math.round(n),-t)};S.plus=function(){var n=l.apply(void 0,arguments);if(!dn(n))return dt.call(void 0,arguments,function(t,r){return+s(+s(t,n)+ +s(r,n),-n)})},S.minus=function(){var n=l.apply(void 0,arguments);if(!dn(n))return dt.call(void 0,arguments,function(t,r){return+s(+s(t,n)-+s(r,n),-n)})};var Ln=S.multiply=function(){if(c.apply(void 0,arguments)){var n=it(arguments),t=d(n,!0);return n.length<=1?t:Ln.apply(void 0,n)}},qn=S.except=function(){if(c.apply(void 0,arguments)){var n=it(arguments),t=d(n,!1);return Nn(t)?n[0]/n[1]:n.length<=1?t:qn.apply(void 0,n)}},Jn=S.has=function(n,t){return null!=n&&j.call(n,t)},zn=function(){},Kn=S.create=function(n){return null==n?{}:C?C(n):n.__proto__?{__proto__:n}:(zn.prototype=n,new zn)},Yn=S.forIn=function(n,t,r){if(null==n)return n;for(var e in n)t.call(r,n[e],e,n);return n},Gn=S.keys=function(n){if(null==n)return[];if(I)return I.call(Object,n);var t=[];return Yn(n,function(r,e){Jn(n,e)&&t.push(e)}),t},Qn=S.size=function(n){return v(n).length},Vn=S.each=function(n,t,r){return t=cn(t),Mn(n)&&R?R.call(n,function(n,r){t.call(this,n,""+r)},r):y(n,t,r)},Xn=S.breakEach=function(n,t,r){return y(n,t,r,!0)},Zn=S.extend=function(n,t){function r(t,r){n[r]=t}return An(n)?(t!==!0?Vn(k.call(arguments,1),function(n){Yn(n,r)}):Vn(k.call(arguments,2),function(n){Vn(n,r)}),n):n},nt=(S.defaults=function(n,t){function r(t,r){dn(n[r])&&(n[r]=t)}return An(n)?(t!==!0?Vn(k.call(arguments,1),function(n){Yn(n,r)}):Vn(k.call(arguments,2),function(n){Vn(n,r)}),n):n},S.clone=function(n){return In(n)?tt(n):yn(n)?Zn(function(){return n.apply(this,arguments)},n):gn(n)?k.call(n):Zn({},n)},["String","Number","Boolean","Null","Undefined"]),tt=S.copy=function(n){var t;if(t=In(n,nt))return An(n)?new N[t](n.valueOf()):n;if(bn(n))return n;if(wn(n))return new RegExp(n.source,(n.global?"g":"")+(n.multiline?"m":"")+(n.ignoreCase?"i":""));if(mn(n))return new Date(n.getTime());if(Sn(n))return new Error(n.message);var r={};return gn(n)&&(r=[]),yn(n)&&(r=function(){return n.apply(this,arguments)}),Yn(n,function(n,t){r[t]=tt(n)}),r};S.getObject=function(n){return Xn(k.call(arguments,1),function(t){try{n=n[t]}catch(r){return n=void 0,!1}}),n};var rt=S.is=Object.is||function(n,t){return Nn(n)&&Nn(t)?!0:0===n&&0===t?1/n===1/t:n===t},et=S.from=Array.from||function(n,t,r){var e=[];return t=cn(t),n&&n.length?(F.apply(e,k.call(n)),ct(e,t,r)):e};S.of=Array.of||function(){return k.call(arguments)};var it=S.toArray=function(n){return gn(n)?n:Mn(n)?k.call(n):(sn.toArray(n),[])},ut=S.getArray=function(n){switch(n=it(n),n.length){case 0:return null;case 1:return n[0];default:return n}},ot=S.indexOf=function(n,t,r){if(On(n))return-1;if(Mn(n)&&(n=it(n)),T&&T===n.indexOf)return T.apply(n,k.call(arguments,1));var e=gn(n),i=-1;return y(n,function(n,r){return n===t?(i=r,!1):void 0},void 0,!0,~~r),e?+i:i},at=(S.lastIndexOf=function(n,t,r){if(n=it(n),W)return W.apply(n,k.call(arguments,1));r=~~r;var e=n.length-1,i=ot(n.reverse(),t,3===arguments.length?e-r:r);return-1===i?-1:e-i},S.forEach=function(n,t,r){return n=it(n),t=cn(t),Vn(n,function(r,e){t.call(this,r,+e,n)},r)}),ct=S.map=function(n,t,r){if(On(n))return n;if(Mn(n)&&(n=it(n)),t=cn(t),B&&B===n.map)return B.call(n,t,r);var e=gn(n),i=e?[]:{};return Vn(n,function(r,e){i[e]=t.call(this,r,e,n)},r),i},lt=S.filter=function(n,t,r){if(On(n))return n;if(Mn(n)&&(n=it(n)),t=cn(t),H&&H===n.filter)return H.call(n,t,r);var e=gn(n),i=e?[]:{};return e?Vn(n,function(r,e){t.call(this,r,e,n)&&i.push(r)},r):Vn(n,function(r,e){t.call(this,r,e,n)&&(i[e]=r)}),i},ft=S.every=function(n,t,r){if(On(n))return!1;if(Mn(n)&&(n=it(n)),t=cn(t),P&&P===n.every)return P.call(n,t,r);var e=!0,i=gn(n);return Xn(n,function(r,u){return t.call(this,r,i?+u:u,n)?void 0:e=!1},r),e},pt=S.some=function(n,t,r){if(On(n))return!1;if(Mn(n)&&(n=it(n)),t=cn(t),U&&U===n.some)return U.call(n,t,r);var e=!1,i=gn(n);return Xn(n,function(r,u){return t.call(this,r,i?+u:u,n)?(e=!0,!1):void 0},r),e},st=new TypeError("Reduce of empty array with no initial value"),dt=S.reduce=function(n,t,r){n=it(n);var e=k.call(arguments,1);if(e[0]=t=cn(t),L)return L.apply(n,e);var i=e.length,u=0,o=1===i,a=o?n[u++]:r;if(o&&0===n.length)throw st;return y(n,function(r,e){a=t.call(this,a,r,+e,n)},void 0,!1,u),a},vt=(S.reduceRight=function(n,t,r){n=it(n);var e=k.call(arguments,1);if(e[0]=t=cn(t),q)return q.apply(n,e);var i=n.length-1;return e.unshift(n.reverse()),e[1]=function(n,r,e,u){return t(n,r,i-e,u)},dt.apply(void 0,e)},S.contains=function(n,t){var r=!1;return y(n,function(n){return rt(n,t)?(r=!0,!1):void 0},void 0,!0),r});S.find=function(n,t,r){return n=it(n),t=cn(t),rn?rn.call(n,t,r):g(n,t,r).val},S.findIndex=function(n,t,r){return n=it(n),t=cn(t),en?rn.call(n,t,r):g(n,t,r).key};var yt=S.difference=function(n){n=it(n);var t=O.apply(w,k.call(arguments,1));return lt(n,function(n){return!vt(t,n)})};S.without=function(n){var t=yt.apply(void 0,arguments);return n.length=0,F.apply(n,t),n};var ht=(S.union=function(n,t){n=it(n);var r;return t?lt(n.sort(),function(n,t){return!(t&&r===n||(r=n,0))}):(r=[],lt(n,function(n,t){return!vt(r,n)&&(r.push(n),!0)}))},S.flatten=function(){var n=[];return at(arguments,function(t,r){F.apply(n,gn(t)?ht.apply(void 0,O.apply(w,t)):[t])}),n});S.whiteList=function(n){var t=O.apply(w,k.call(arguments,1));return lt(n,function(n){return m(t,n)})},S.blackList=function(n){var t=O.apply(w,k.call(arguments,1));return lt(n,function(n){return!m(t,n)})},S.fill=function(n,t,r,e){if(n=it(n),un)return un.call(n,t,r,e);var i=n.length;r=~~r,e=~~e,r=0>=r?i+r:r,e=0>=e?i+e:e,0>r&&(r=0),e>i&&(e=i);var u=e-r;if(u>0){var o=et(new Array(u),function(){return t});D.call(o,r,u),E.apply(n,o)}return n},S.copyWithin=function(n,t,r,e){return n=it(n),on?on.call(n,t,r,e):void 0};var gt=S.bind=function(n){function t(){if(this instanceof t){r.shift();var e=Kn(n.prototype),i=n.apply(e,O.apply(r,arguments));return An(i)?i:e}return n.apply(r.shift(),O.apply(r,arguments))}if(!yn(n))return sn.bind(n),an;if(J)return J.apply(n,k.call(arguments,1));var r=k.call(arguments,1);return t.toString=function(){return"function () { [native code] }"},t},mt=S.delay=function(n,t){var r=k.call(arguments,2);return D.call(r,n,void 0),setTimeout(function(){gt.apply(void 0,r)()},t)},bt=S.defer=function(){var n=k.call(arguments);return n.splice(1,0,0),mt.apply(void 0,n)},St=(S.once=function(n){var t=k.call(arguments,2);return D.call(t,n,arguments[1]),function r(){return r.used?void 0:(r.used=!0,gt.apply(void 0,O.apply(t,arguments))())}},S.defered=function(){function n(){var i,u;(i=r.shift())?(t.status="pendding",bt(function(){try{var t=~~vn(e[0]);u=e.slice(t),e.length=0,e[1]=i[i.allback?"allback":t?"sucback":"errback"].apply(void 0,u),e[0]=null}catch(r){e[0]=r}n()})):t.status="end"}var t={},r=[],e=[null];return t.isDefered=!0,t.status="init",t.then=function(n,e){return r.push({sucback:n||an,errback:e||an}),t},t.always=function(n){return r.push({allback:n||an}),t},t.pass=function(r){return arguments.length&&(e[0]=r,F.apply(e,k.call(arguments,1))),n(),t},t});S.when=function(){function n(){if(--r<=0){var n=vn(ut(i));n&&e.unshift(null),t.pass.apply(void 0,n?e:i)}}var t=St(),r=arguments.length,e=[],i=[];return at(arguments,function(t,r){t.isDefered?(t.then(function(){e[r]=ut(arguments)},function(){i[r]=ut(arguments)}).always(n),"end"===t.status&&t.pass()):yn(t)?bt(function(){try{e[r]=t()}catch(u){i[r]=u}n()}):(e[r]=t,n())}),t};var wt=/^(yyyy)(?:(.+)(MM))?(?:(.+)(dd))?(?:(.+)(HH))?(?:(.+)(mm))?(?:(.+)(ss))?(.+)?$/,xt=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];return S.formatDate=function(n,t){!hn(n)&&(n=+new Date),!xn(t)&&(t="yyyy-MM-dd HH:mm:ss");var r=new Date(n);return Nn(+r)?(sn.formatDate(n,data),""):t.replace(wt,function(){var n=[];return at(k.call(arguments,1,-2),function(t,e){var i;t&&(e%2===0?(i=r[xt[e/2]](),"MM"===t&&i++,"yyyy"!==t&&(i=(o("0",2)+i).slice(-2)),n.push(i)):n.push(t))}),n.join("")})},S});