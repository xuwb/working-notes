"use strict";define(function(require,exports,module){var t=require("react"),e=require("reflux"),a=(require("./crudBtn"),require("./dataRow")),n=require("stores/crud_store"),i=require("actions/crud_actions"),s=t.createClass({displayName:"DataTable",mixins:[e.listenTo(n,"onDataChange")],getInitialState:function(){return{data:[]}},onDataChange:function(t,e){var a=this.state.data;switch(t.type){case"init":this.setState({data:t.value});break;case"add":a.push(t.value),this.setState({data:a});break;case"modify":var n=a.map(function(e){return e.id==t.value.id&&(e=t.value),e});this.setState({data:n});break;case"delete":var i=this.state.data,s=i.indexOf(t.value);-1!=s&&i.splice(s,1),this.setState({data:i})}"function"==typeof e&&e()},onTableBtnClick:function(t,e){switch(t){case"modify":this.props.callbackParent(e);break;case"delete":i["delete"](e)}},render:function(){var e=[];return this.state.data.forEach(function(n){e.push(t.createElement(a,{key:n.id,data:n,callbackParent:this.onTableBtnClick}))}.bind(this)),t.createElement("table",{className:"col-table",ref:"tableList"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("td",{width:"100"},"标题"),t.createElement("td",{width:"80"},"作者"),t.createElement("td",{width:"150"},"发布时间"),t.createElement("td",{width:"150"},"操作"))),t.createElement("tbody",null,e))}});module.exports=s});