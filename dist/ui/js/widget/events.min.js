"use strict";define(function(require,exports,module){function t(){}function r(t,r,e){var o=!0;if(t){var n=0,i=t.length,s=r[0],f=r[1];r[2];switch(r.length){case 0:for(;i>n;n+=2)o=t[n].call(t[n+1]||e)!==!1&&o;break;case 1:for(;i>n;n+=2)o=t[n].call(t[n+1]||e,s)!==!1&&o;break;case 2:for(;i>n;n+=2)o=t[n].call(t[n+1]||e,s,f)!==!1&&o;break;case 3:for(;i>n;n+=2)o=t[n].call(t[n+1]||e,s,f.a3)!==!1&&o;break;default:for(;i>n;n+=2)o=t[n].apply(t[n+1]||e,r)!==!1&&o}}return o}function e(t){return"[object Function]"===Object.prototype.toString.call(t)}var o=/\s+/;t.prototype.on=function(t,r,e){var n,i,s;if(!r)return this;for(n=this.__events||(this.__events={}),t=t.split(o);i=t.shift();)s=n[i]||(n[i]=[]),s.push(r,e);return this},t.prototype.once=function(t,r,e){function o(){n.off(t,o),r.apply(e,arguments)}var n=this;return this.on(t,o,e)},t.prototype.off=function(t,r,e){var i,s,f,a;if(!(i=this.__events))return this;if(!(t||r||e))return delete this.__events,this;for(t=t&&t.split(o)||n(i);s=t.shift();)if(f=i[s])if(r||e)for(a=f.length-2;a>=0;a-=2)r&&r!==f[a]||e&&e!==f[a+1]||f.splice(a,2);else delete i[s];return this},t.prototype.trigger=function(t){var e,n,i,s,f,a,c=[],p=!0;if(t=t.split(o),!(s=this.__events))return this;for(f=1,a=arguments.length;a>f;f++)c[f-1]=arguments[f];for(;i=t.shift();)(e=s[i])&&(e=e.slice()),(n=s.all)&&(n=n.slice()),"all"!=i&&(p=r(e,c,this)&&p),p=r(n,[i].concat(c),this)&&p;return p},t.prototype.emit=t.prototype.trigger,t.mixTo=function(r){function o(t){r[t]=function(){return i[t].apply(s,Array.prototype.slice.call(arguments)),this}}var i=t.prototype;if(e(r))n(i).forEach(function(t){r.prototype[t]=i[t]});else{var s=new t;for(var f in i)i.hasOwnPrototype(f)&&o(f)}},module.exports=t;var n=Object.keys;n||(n=function(t){var r=[];for(var e in t)t.hasOwnProperty(e)&&r.push(e);return r}),Array.prototype.forEach||(Array.prototype.forEach=function(t){for(var r=0,e=this.length;e>r;r++)t.call(this,this[r],r,this)})});