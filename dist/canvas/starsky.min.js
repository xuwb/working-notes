"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var a=0;a<n.length;a++){var e=n[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,a,e){return a&&t(n.prototype,a),e&&t(n,e),n}}();$(function(){var t=$("#canvas-sky");new Starsky(t)});var Starsky=function(){function t(n,a){_classCallCheck(this,t),this.canvas=n,this.context=n[0].getContext("2d"),this.options=a||{},this.centerPos={},this.pointList=[],this.pointInfo=[],this.animateAngle=[],this.timeCount=0,this.animateHandler=null,this.init()}return _createClass(t,[{key:"init",value:function(){var t=this.options;$(window).resize(this.resizeCanvas),this.resizeCanvas(),this.bindEvent(),this.drawPoint(t.pointNum)}},{key:"resizeCanvas",value:function(){var t=$(window).get(0).innerWidth,n=$(window).get(0).innerHeight;this.canvas.attr("width",t),this.canvas.attr("height",n),this.centerPos={x:t/2,y:n/2}}},{key:"drawPoint",value:function(t){for(var n=this.canvas,a=this.context,e=this.pointList,i=this.centerPos,s=this.pointInfo,r=this.animateAngle,o=t||100,h=n.width(),c=n.height(),l=h>c?h/2:c/2,u=0;o>u;u++){var v=parseInt(l*Math.random(),10);-1!=e.indexOf(v)||100>v?u--:e.push(v)}e.forEach(function(t){a.beginPath();var n=t,e=Math.random(),o={x:i.x+t*Math.cos(n),y:i.y+t*Math.sin(n),r:t,alpha:e};s.push(o),a.strokeStyle="rgba(0, 0, 0, 0)",a.lineWidth=1,a.moveTo(o.x,o.y),a.arc(i.x,i.y,t,n,n+Math.PI/360),a.stroke(),r.push({angle1:n,angle2:t})})}},{key:"bindEvent",value:function(){var t=this,n=this.timeCount,a=this.animateHandler;this.canvas.on("mouseenter",function(n){a&&cancelAnimationFrame(a),t.drawArc(1)}),this.canvas.on("mouseout",function(e){n=0,a&&cancelAnimationFrame(a),t.drawArc(-1)})}},{key:"drawArc",value:function(t){function n(){e.clearRect(0,0,a.width(),a.height()),i+=2,s.forEach(function(n,a){e.beginPath();var s=t>0?l[a].angle1:l[a].angle2,o=s+Math.PI/360+i*Math.PI/720;e.strokeStyle="rgba(0, 0, 0, "+h[a].alpha+")",e.moveTo(h[a].x,h[a].y),e.arc(c.x,c.y,n,l[a].angle1,o,!(t>0)),e.stroke(),r[a]={angle1:o,angle2:l[a].angle1}}),o=requestAnimationFrame(n),0>t&&r[0].angle1-r[0].angle2>-.01&&(e.clearRect(0,0,a.width(),a.height()),cancelAnimationFrame(o))}var a=this.canvas,e=this.context,i=this.timeCount,s=this.pointList,r=this.animateAngle,o=this.animateHandler,h=this.pointInfo,c=this.centerPos,l=r.slice();h=h.map(function(t,n){return{x:c.x+t.r*Math.cos(l[n].angle1),y:c.y+t.r*Math.sin(l[n].angle1),alpha:t.alpha}}),n()}}]),t}();