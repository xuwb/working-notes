"use strict";define(function(n,t){function r(n,t,r){var e=E[r];return e(n)===e(t)}function e(n,t){return Vn(n)===Vn(t)&&st(y(n),function(r,e){return In(n[r],t[r])})}function i(n,t){return n=Bn((1023&n).toString(2),"0",10),t=Bn((1023&t).toString(2),"0",10),(parseInt(n+t,2)+65536).toString(16)}function u(n){if(parseInt(n,16)<=65535)return[n];var t=parseInt(n,16)-65536,r=t>>10,e=1023&t;return r=(55296|r).toString(16).toUpperCase(),e=(56320|e).toString(16).toUpperCase(),[r,e]}function a(n,t,r){return n=Rn(n),Q?Q.call(n,t,r):-1!==n.indexOf(t,r)}function o(n,t,r,e){n=Rn(n),t=Rn(t),r=~~r;var i,u=n.length,a=e?nn:tn;return u>=r?n:a?a.call(n,t,r):(i=Math.ceil((r-u)/t.length),e?(Wn(t,i)+n).slice(-r):(n+Wn(t,i)).slice(0,r))}function c(n,t){for(null==n&&(n=""),n+="",t=~~t;n.length<t;)n+=n;return n.slice(0,t)}function l(n){return n=~~n,0>n?0:n}function f(){var n=!0;return Zn(F.apply(A,arguments),function(t){return En(t)?void 0:(pn("warn",t,"the num is not a finite number"),n=!1)}),n}function s(){return f.apply(void 0,arguments)?Math.max.apply(Math,lt(arguments,function(n){return((""+n).split(".")[1]||"").length})):void 0}function p(n,t,r,e){return e<r.length?n+t+r.slice(0,e)+"."+r.slice(e):n+t+Hn(r,"0",e)}function d(n,t,r,e){return t.length>e?n+t.slice(0,-e)+"."+t.slice(-e)+r:n+"0."+Bn(t,"0",e)+r}function v(n,t){if(f(n)){if(n+="",t=~~t,0===t)return n;var r,e,i="";return n=n.split("."),r=n[0],e=n[1]||"","-"===r.charAt(0)&&(i="-",r=r.slice(1)),0>t?d(i,r,e,-t):p(i,r,e,t)}}function h(n,t){var r=n[0]+"",e=n[1]+"",i=(r.split(".")[1]||"").length,u=(e.split(".")[1]||"").length,a=t?+v(+r.replace(".","")*+e.replace(".",""),-(i+u)):+v(+r.replace(".","")/+e.replace(".",""),u-i);return n.splice(0,2,a),a}function y(n){return Qn(Nn(n)?ut(n):n)}function g(n,t,r,e,i){for(var u,a=y(n),o=~~i,c=a.length;c>o&&(u=a[o],t.call(r,n[u],u,n)!==!1||!e);o++);}function m(n,t,r){if(rn){var e=!1;return g(n,kn(t)?function(n){return kn(n)?(e=!0,!1):void 0}:function(n){return n===t?(e=!0,!1):void 0},void 0,!0,r>=0?r:n.length+r),e}return rn.call(n,t,r)}function b(n,t,r){var e={key:-1,val:void 0};return Zn(n,function(n,r){return t.call(this,n,+r)?(e={key:r,val:n},!1):void 0},r),e}function w(n,t){return pt(n,function(n){return st(n,function(n,r){return n===t[r]})})}var S=n("./limit-dom"),x={},A=Array.prototype,M=Object.prototype,N=Function.prototype,k=String.prototype,E=window,O=(E.document,A.slice),D=A.splice,F=A.concat,j=A.unshift,I=A.push,C=M.toString,_=M.hasOwnProperty;x.slice=O;var R=Object.keys,T=Object.create,W=A.forEach,B=A.indexOf,H=A.lastIndexOf,P=A.map,U=A.filter,$=A.every,L=A.some,q=A.reduce,J=A.reduceRight,z=N.bind,K=k.trim,Y=k.codePointAt,G=String.fromCodePoint,Q=k.includes,V=k.startsWith,X=k.endsWith,Z=k.repeat,nn=k.padStart,tn=k.padEnd,rn=A.includes,en=A.find,un=A.findIndex,an=A.fill,on=A.copyWithin,cn=x.K=function(n){return n},ln=x.cb=function(n){return yn(n)?n:cn},fn=x.O={},sn={log:"background:#333;margin-left:11px;padding-right:17px;",error:"background:#F00;padding-right:3px;",warn:"background:#F70;margin-left:11px;padding-right:10px;"},pn=x.log=function(){if(!x.logClosed){var n,t=O.call(arguments),r=t.shift(),e=console||fn,i=S.isChrome;ht(["error","log","warn"],r)||(t.unshift(r),r="error"),n=e[r]||cn;try{i&&t.unshift(sn[r]+"color:#FFF;padding-left:3px;border-radius:3px;"),t.unshift((i?"%c":"")+"limitJS "+r+":"),n.apply(e,t)}catch(u){n("limitJS ",t)}}},dn={toString:function(n){return pn("warn",n,"change into","'"+n+"'","limit.toString is called")},toArray:function(n){return pn("warn",n,"change into []","limit.toArray is called")},formatDate:function(n,t){return pn("warn","timestamp:",n,"date:",date,"limit.formatDate is called")},bind:function(n){return pn("warn",fun,"type is not function, limit.bind is called")}},vn=x.isUndefined=function(n){return void 0===n};x.setDefault=function(n){var t;return Zn(arguments,function(n){return t=n,vn(n)}),t};var hn=(x.isDefined=function(n){return!vn(n)},x.isNull=function(n){return null===n}),yn=x.isFunction=function(n){return"function"==typeof n};x.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===C.call(n)};"String,Number,Array,Date,RegExp,Error,Math".replace(/\w+/g,function(n){x["is"+n]=function(t){return C.call(t)==="[object "+n+"]"}});var gn=x.isNumber,mn=x.isArray,bn=x.isDate,wn=x.isMath,Sn=x.isError,xn=x.isRegExp,An=x.isString,Mn=x.isObject=function(n){return yn(n)||"object"==typeof n&&!!n},Nn=(x.isArguments=function(n){return zn(n,"callee")},x.isArrayLike=function(n){return!!n&&gn(n.length)&&!yn(n)&&!Fn(n)}),kn=x.isNaN=Number.isNaN||function(n){return gn(n)&&isNaN(n)},En=x.isFinite=Number.isFinite||function(n){return gn(n)&&isFinite(n)},On=x.isInteger=Number.isInteger||function(n){return En(n)&&Math.floor(n)===n};x.isSafeInteger=Number.isSafeInteger||function(n){return On(n)&&n>-9007199254740992&&9007199254740992>n};var Dn=x.isEmpty=function(n){return null==n?!0:0===Vn(n)};x.isElement=function(n){return!!n&&1===n.nodeType},x.isDocument=function(n){return!!n&&9===n.nodeType};var Fn=x.isWin=function(n){return!!n&&n.window===n&&n.self==n},jn=["String","Number","Boolean"],In=x.isEqual=function(n,t){if(pn("log","limit.isEqual is called ",typeof n,":",n,typeof t,":",t),n===t)return!0;if(C.call(n)!==C.call(t))return!1;if(kn(n))return!0;var i;return(i=_n(n,jn))?r(n,t,i):bn(n)?+n===+t:xn(n)?""+n==""+t:yn(n)&&""+n!=""+t?!1:e(n,t)},Cn=["String","Number","Boolean","Null","Undefined","RegExp","Date","Math","Error"],_n=x.isBase=function(n,t){!mn(t)&&(t=Cn);var r="";return pt(t,function(t,e){var i=x["is"+t];return i&&i(n)&&(r=t)}),r};x.includes=function(n,t,r){return mn(n)?m(n,t,r):a(n,t,r)};var Rn=x.toString=function(n){return An(n)?n:(dn.toString(n),""+n)},Tn=/^\s+|\s+$/g;x.trim=function(n){return n=arguments.length?n+"":"",K?K.call(n):n.replace(Tn,"")};x.codePointAt=function(n,t){if(n=Rn(n),t=~~t,Y){var r=n.charCodeAt(t);return r>=55296&&56319>=r?i(r,n.charCodeAt(++t)):r.toString(16)}return Y.call(n,t).toString(16)},x.fromCodePoint=function(n){return isFinite(n)?G?G.call(String,n):(n=lt(u(n.toString(16)),function(n){return"\\u"+n}).join(""),new Function('return "'+n+'"')()):(pn("warn",n,"the code must be a number"),"")},x.startsWith=function(n,t,r){return n=Rn(n),V?V.call(n,t,r):(r=~~r,n.indexOf(t,r)===r)},x.endsWith=function(n,t,r){if(n=Rn(n),X)return X.call(n,t,r);r=3===arguments.length?~~r:n.length;var e=r-t.length;return n.lastIndexOf(t,e)===e};var Wn=x.repeat=function(n,t){if(n=Rn(n),t=l(t),Z)return Z.call(n,t);var r=new Array(t),e=[];return Array.prototype.push.apply(e,r),e.map(function(){return n}).join("")},Bn=x.padStart=function(n,t,r){return o(n,t,r,!0)},Hn=x.padEnd=function(n,t,r){return o(n,t,r,!1)},Pn=(x.random=function(n,t){n=~~n,t=~~t;var r=Math.max(n,t),e=Math.min(n,t);return Math.floor((r-e+1)*Math.random()+e)},/(\d{1,3})(?=(\d{3})+$)/g),Un=/(\d{1,3})(?=(\d{3})+\.)/g,$n=/,/g;x.thousandSeparator=function(n,t){return En(n)?(gn(t)||(t=2),Ln(n,t).replace(t?Un:Pn,"$1,")):(pn("warn","limit.thousandSeparator is called ",typeof n,":",n),"")},x.unThousandSeparator=function(n){return An(n)?+n.replace($n,""):(pn("warn","limit.unThousandSeparator is called ",typeof n,":",n),NaN)};var Ln=x.toFixed=function(n,t){t=l(t);var n=v(n,t);return vn(n)?n:v(Math.round(n),-t)};x.plus=function(){var n=s.apply(void 0,arguments);if(!vn(n))return vt.call(void 0,arguments,function(t,r){return+v(+v(t,n)+ +v(r,n),-n)})},x.minus=function(){var n=s.apply(void 0,arguments);if(!vn(n))return vt.call(void 0,arguments,function(t,r){return+v(+v(t,n)-+v(r,n),-n)})};var qn=x.multiply=function(){if(f.apply(void 0,arguments)){var n=ut(arguments),t=h(n,!0);return n.length<=1?t:qn.apply(void 0,n)}},Jn=x.except=function(){if(f.apply(void 0,arguments)){var n=ut(arguments),t=h(n,!1);return kn(t)?n[0]/n[1]:n.length<=1?t:Jn.apply(void 0,n)}},zn=x.has=function(n,t){return null!=n&&_.call(n,t)},Kn=function(){},Yn=x.create=function(n){return null==n?{}:T?T(n):n.__proto__?{__proto__:n}:(Kn.prototype=n,new Kn)},Gn=x.forIn=function(n,t,r){if(null==n)return n;for(var e in n)t.call(r,n[e],e,n);return n},Qn=x.keys=function(n){if(null==n)return[];if(R)return R.call(Object,n);var t=[];return Gn(n,function(r,e){zn(n,e)&&t.push(e)}),t},Vn=x.size=function(n){return y(n).length},Xn=x.each=function(n,t,r){return t=ln(t),Nn(n)&&W?W.call(n,function(n,r){t.call(this,n,""+r)},r):g(n,t,r)},Zn=x.breakEach=function(n,t,r){return g(n,t,r,!0)},nt=x.extend=function(n,t){function r(t,r){n[r]=t}return Mn(n)?(t!==!0?Xn(O.call(arguments,1),function(n){Gn(n,r)}):Xn(O.call(arguments,2),function(n){Xn(n,r)}),n):n},tt=(x.defaults=function(n,t){function r(t,r){vn(n[r])&&(n[r]=t)}return Mn(n)?(t!==!0?Xn(O.call(arguments,1),function(n){Gn(n,r)}):Xn(O.call(arguments,2),function(n){Xn(n,r)}),n):n},x.clone=function(n){return _n(n)?rt(n):yn(n)?nt(function(){return n.apply(this,arguments)},n):mn(n)?O.call(n):nt({},n)},["String","Number","Boolean","Null","Undefined"]),rt=x.copy=function(n){var t;if(t=_n(n,tt))return Mn(n)?new E[t](n.valueOf()):n;if(wn(n))return n;if(xn(n))return new RegExp(n.source,(n.global?"g":"")+(n.multiline?"m":"")+(n.ignoreCase?"i":""));if(bn(n))return new Date(n.getTime());if(Sn(n))return new Error(n.message);var r={};return mn(n)&&(r=[]),yn(n)&&(r=function(){return n.apply(this,arguments)}),Gn(n,function(n,t){r[t]=rt(n)}),r};x.getObject=function(n){return Zn(O.call(arguments,1),function(t){try{n=n[t]}catch(r){return n=void 0,!1}}),n};var et=x.is=Object.is||function(n,t){return kn(n)&&kn(t)?!0:0===n&&0===t?1/n===1/t:n===t},it=x.from=Array.from||function(n,t,r){var e=[];return t=ln(t),n&&n.length?(I.apply(e,O.call(n)),lt(e,t,r)):e};x.of=Array.of||function(){return O.call(arguments)};var ut=x.toArray=function(n){return mn(n)?n:Nn(n)?O.call(n):(dn.toArray(n),[])},at=x.getArray=function(n){switch(n=ut(n),n.length){case 0:return null;case 1:return n[0];default:return n}},ot=x.indexOf=function(n,t,r){if(Dn(n))return-1;if(Nn(n)&&(n=ut(n)),B&&B===n.indexOf)return B.apply(n,O.call(arguments,1));var e=mn(n),i=-1;return g(n,function(n,r){return n===t?(i=r,!1):void 0},void 0,!0,~~r),e?+i:i},ct=(x.lastIndexOf=function(n,t,r){if(n=ut(n),H)return H.apply(n,O.call(arguments,1));r=~~r;var e=n.length-1,i=ot(n.reverse(),t,3===arguments.length?e-r:r);return-1===i?-1:e-i},x.forEach=function(n,t,r){return n=ut(n),t=ln(t),Xn(n,function(r,e){t.call(this,r,+e,n)},r)}),lt=x.map=function(n,t,r){if(Dn(n))return n;if(Nn(n)&&(n=ut(n)),t=ln(t),P&&P===n.map)return P.call(n,t,r);var e=mn(n),i=e?[]:{};return Xn(n,function(r,e){i[e]=t.call(this,r,e,n)},r),i},ft=x.filter=function(n,t,r){if(Dn(n))return n;if(Nn(n)&&(n=ut(n)),t=ln(t),U&&U===n.filter)return U.call(n,t,r);var e=mn(n),i=e?[]:{};return e?Xn(n,function(r,e){t.call(this,r,e,n)&&i.push(r)},r):Xn(n,function(r,e){t.call(this,r,e,n)&&(i[e]=r)}),i},st=x.every=function(n,t,r){if(Dn(n))return!1;if(Nn(n)&&(n=ut(n)),t=ln(t),$&&$===n.every)return $.call(n,t,r);var e=!0,i=mn(n);return Zn(n,function(r,u){return t.call(this,r,i?+u:u,n)?void 0:e=!1},r),e},pt=x.some=function(n,t,r){if(Dn(n))return!1;if(Nn(n)&&(n=ut(n)),t=ln(t),L&&L===n.some)return L.call(n,t,r);var e=!1,i=mn(n);return Zn(n,function(r,u){return t.call(this,r,i?+u:u,n)?(e=!0,!1):void 0},r),e},dt=new TypeError("Reduce of empty array with no initial value"),vt=x.reduce=function(n,t,r){n=ut(n);var e=O.call(arguments,1);if(e[0]=t=ln(t),q)return q.apply(n,e);var i=e.length,u=0,a=1===i,o=a?n[u++]:r;if(a&&0===n.length)throw dt;return g(n,function(r,e){o=t.call(this,o,r,+e,n)},void 0,!1,u),o},ht=(x.reduceRight=function(n,t,r){n=ut(n);var e=O.call(arguments,1);if(e[0]=t=ln(t),J)return J.apply(n,e);var i=n.length-1;return e.unshift(n.reverse()),e[1]=function(n,r,e,u){return t(n,r,i-e,u)},vt.apply(void 0,e)},x.contains=function(n,t){var r=!1;return g(n,function(n){return et(n,t)?(r=!0,!1):void 0},void 0,!0),r});x.find=function(n,t,r){return n=ut(n),t=ln(t),en?en.call(n,t,r):b(n,t,r).val},x.findIndex=function(n,t,r){return n=ut(n),t=ln(t),un?en.call(n,t,r):b(n,t,r).key};var yt=x.difference=function(n){n=ut(n);var t=F.apply(A,O.call(arguments,1));return ft(n,function(n){return!ht(t,n)})};x.without=function(n){var t=yt.apply(void 0,arguments);return n.length=0,I.apply(n,t),n};var gt=(x.union=function(n,t){n=ut(n);var r;return t?ft(n.sort(),function(n,t){return!(t&&r===n||(r=n,0))}):(r=[],ft(n,function(n,t){return!ht(r,n)&&(r.push(n),!0)}))},x.flatten=function(){var n=[];return ct(arguments,function(t,r){I.apply(n,mn(t)?gt.apply(void 0,F.apply(A,t)):[t])}),n});x.whiteList=function(n){var t=F.apply(A,O.call(arguments,1));return ft(n,function(n){return w(t,n)})},x.blackList=function(n){var t=F.apply(A,O.call(arguments,1));return ft(n,function(n){return!w(t,n)})},x.fill=function(n,t,r,e){if(n=ut(n),an)return an.call(n,t,r,e);var i=n.length;r=~~r,e=~~e,r=0>=r?i+r:r,e=0>=e?i+e:e,0>r&&(r=0),e>i&&(e=i);var u=e-r;if(u>0){var a=it(new Array(u),function(){return t});j.call(a,r,u),D.apply(n,a)}return n},x.copyWithin=function(n,t,r,e){return n=ut(n),on?on.call(n,t,r,e):void 0};var mt=x.bind=function(n){function t(){if(this instanceof t){r.shift();var e=Yn(n.prototype),i=n.apply(e,F.apply(r,arguments));return Mn(i)?i:e}return n.apply(r.shift(),F.apply(r,arguments))}if(!yn(n))return dn.bind(n),cn;if(z)return z.apply(n,O.call(arguments,1));var r=O.call(arguments,1);return t.toString=function(){return"function () { [native code] }"},t},bt=x.delay=function(n,t){var r=O.call(arguments,2);return j.call(r,n,void 0),setTimeout(function(){mt.apply(void 0,r)()},t)},wt=x.defer=function(){var n=O.call(arguments);return n.splice(1,0,0),bt.apply(void 0,n)},St=(x.once=function(n){var t=O.call(arguments,2);return j.call(t,n,arguments[1]),function r(){return r.used?void 0:(r.used=!0,mt.apply(void 0,F.apply(t,arguments))())}},x.defered=function(){function n(){var i,u;(i=r.shift())?(t.status="pendding",wt(function(){try{var t=~~hn(e[0]);u=e.slice(t),e.length=0,e[1]=i[i.allback?"allback":t?"sucback":"errback"].apply(void 0,u),e[0]=null}catch(r){e[0]=r}n()})):t.status="end"}var t={},r=[],e=[null];return t.isDefered=!0,t.status="init",t.then=function(n,e){return r.push({sucback:n||cn,errback:e||cn}),t},t.always=function(n){return r.push({allback:n||cn}),t},t.pass=function(r){return arguments.length&&(e[0]=r,I.apply(e,O.call(arguments,1))),n(),t},t});x.when=function(){function n(){if(--r<=0){var n=hn(at(i));n&&e.unshift(null),t.pass.apply(void 0,n?e:i)}}var t=St(),r=arguments.length,e=[],i=[];return ct(arguments,function(t,r){t.isDefered?(t.then(function(){e[r]=at(arguments)},function(){i[r]=at(arguments)}).always(n),"end"===t.status&&t.pass()):yn(t)?wt(function(){try{e[r]=t()}catch(u){i[r]=u}n()}):(e[r]=t,n())}),t};var xt=/^(yyyy)(?:(.+)(MM))?(?:(.+)(dd))?(?:(.+)(HH))?(?:(.+)(mm))?(?:(.+)(ss))?(.+)?$/,At=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];return x.formatDate=function(n,t){!gn(n)&&(n=+new Date),!An(t)&&(t="yyyy-MM-dd HH:mm:ss");var r=new Date(n);return kn(+r)?(dn.formatDate(n,data),""):t.replace(xt,function(){var n=[];return ct(O.call(arguments,1,-2),function(t,e){var i;t&&(e%2===0?(i=r[At[e/2]](),"MM"===t&&i++,"yyyy"!==t&&(i=(c("0",2)+i).slice(-2)),n.push(i)):n.push(t))}),n.join("")})},x});