"use strict";define(function(t,e,a){var n=t("react"),i=t("reflux"),s=(t("./crudBtn"),t("./dataRow")),l=t("../stores/crud_store"),c=t("../actions/crud_actions"),r=n.createClass({displayName:"DataTable",mixins:[i.listenTo(l,"onDataChange")],getInitialState:function(){return{data:[]}},onDataChange:function(t){var e=this.state.data;switch(t.type){case"init":this.setState({data:t.value});break;case"add":e.push(t.value),this.setState({data:e});break;case"modify":var a=e.map(function(e){return e.id==t.value.id&&(e=t.value),e});this.setState({data:a});break;case"delete":var n=this.state.data,i=n.indexOf(t.value);-1!=i&&n.splice(i,1),this.setState({data:n})}},onTableBtnClick:function(t,e){switch(t){case"modify":this.props.callbackParent(e);break;case"delete":c["delete"](e)}},render:function(){var t=[];return this.state.data.forEach(function(e){t.push(n.createElement(s,{key:e.id,data:e,callbackParent:this.onTableBtnClick}))}.bind(this)),n.createElement("table",{className:"col-table",ref:"tableList"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("td",{width:"100"},"标题"),n.createElement("td",{width:"80"},"作者"),n.createElement("td",{width:"150"},"发布时间"),n.createElement("td",{width:"150"},"操作"))),n.createElement("tbody",null,t))}});a.exports=r});